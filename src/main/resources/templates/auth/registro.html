<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image" th:href="@{/Assets/IMG/logotipo.png}">
    <link rel="stylesheet" href="/Assets/css/registro.css?v1.0">
    <title>Registro - Cita Ya</title>
</head>

<body class="body">
    <div class="container_login">
        <div class="apartado_1">
            <div class="container_login-form">
                <div class="logo-name">
                    <img th:src="@{/Assets/IMG/nom.png}">
                </div>

                <!-- Formulario -->
                <form th:action="@{/paciente/guardar}" method="POST">

                    <!-- Tipo de Documento -->
                    <div class="label"><label for="tipo_doc">Tipo de Documento</label></div>
                    <select id="tipo_doc" name="tipodoc" required>
                        <option value="">- Selecciona -</option>
                        <option value="CC">CC</option>
                        <option value="TI">TI</option>
                        <option value="RC">RC</option>
                        <option value="CE">CE</option>
                        <option value="PA">PA</option>
                        <option value="DNI">DNI</option>
                        <option value="PEP">PEP</option>
                        <option value="PPT">PPT</option>
                    </select>

                    <!-- Número de Documento -->
                    <div class="label"><label for="numero_doc">Número de Documento</label></div>
                    <div class="input">
                        <input type="text" id="numero_doc" name="numerodoc" placeholder="Ej: 1234567890" maxlength="10"
                            oninput="validarNumeroDoc(this)" required>
                    </div>

                    <!-- Nombres -->
                    <div class="label"><label for="nombre">Nombres</label></div>
                    <div class="input">
                        <input type="text" id="nombre" name="nombre" placeholder="Ingresa tus nombres completos"
                            oninput="soloLetras(this)" minlength="18" maxlength="50" required>
                    </div>

                    <!-- Apellidos -->
                    <div class="label"><label for="apellido">Apellidos</label></div>
                    <div class="input">
                        <input type="text" id="apellido" name="apellido" placeholder="Ingresa tus apellidos completos"
                            oninput="soloLetras(this)" minlength="20" maxlength="100" required>
                    </div>

                    <!-- Género -->
                    <div class="label"><label for="genero">Género</label></div>
                    <select id="genero" name="genero" required>
                        <option value="">- Selecciona -</option>
                        <option value="M">Masculino</option>
                        <option value="F">Femenino</option>
                        <option value="Otro">Otro</option>
                    </select>

                    <!-- Fecha de Nacimiento -->
                    <div class="label"><label for="fecha_nacimiento">Fecha de Nacimiento</label></div>
                    <div class="input">
                        <input type="date" id="fecha_nacimiento" name="fechanacimiento" required>
                    </div>

                    <!-- Tipo de Sangre -->
                    <div class="label"><label for="tipo_sangre">Tipo de Sangre</label></div>
                    <select id="tipo_sangre" name="tiposangre">
                        <option value="">- Selecciona -</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                    </select>

                    <!-- Dirección -->
                    <div class="label"><label for="direccion">Dirección</label></div>
                    <div class="input">
                        <input type="text" id="direccion" name="direccion" minlength="15" maxlength="255"
                            placeholder="Ej: Calle 123 #45-67">
                    </div>

                    <!-- Teléfono -->
                    <div class="label"><label for="telefono">Teléfono</label></div>
                    <div class="input">
                        <input type="tel" id="telefono" name="telefono" minlength="6" maxlength="10" placeholder="Ej: 3001234567"
                            oninput="validarTelefono(this)" required>
                    </div>

                    <!-- Correo -->
                    <div class="label"><label for="correo">Correo</label></div>
                    <div class="input">
                        <input type="email" id="correo" name="correo" placeholder="Ingresa tu correo" minlength="10" maxlength="100"
                            required>
                    </div>

                    <!-- Contraseña -->
                    <div class="label"><label for="contraseña">Contraseña</label></div>
                    <div class="input">
                        <input type="password" id="contraseña" name="contrasena" minlength="10"
                            placeholder="Crea una contraseña segura" pattern="(?=.*[A-Z])(?=.*[!@#$%^&*])\S{10,}"
                            title="Incluye 10 caracteres, una mayúscula y un carácter especial." required>
                    </div>

                    <button type="submit">Registrarse</button>

                    <!-- Ir al login -->
                    <div class="cuenta">
                        <p>¿Ya tienes cuenta?
                            <a th:href="@{/login}">Inicia sesión</a>
                        </p>
                    </div>

                </form>
            </div>
        </div>

        <div class="apartado_2">
            <div class="emoji-icon">
                <img th:src="@{/Assets/IMG/logoti.png}">
            </div>
            <div class="h1-info">
                <h1>Formulario de Registro</h1>
            </div>
            <div class="P-info">
                <p>Regístrate y accede a tu portal médico para gestionar tus citas</p>
            </div>
            <div class="p-info">
                <p>✓ Agenda citas 24/7</p>
                <p>✓ Consulta tu historial médico</p>
                <p>✓ Recibe recordatorios</p>
            </div>
        </div>
    </div>

    <script>
        function soloNumeros(input) {
            input.value = input.value.replace(/\D/g, '');
        }

        function validarNumeroDoc(input) {
            let cleanValue = input.value.replace(/\D/g, '').substring(0, 10);
            input.value = cleanValue;
            if (cleanValue.length !== 10 && cleanValue.length > 0) {
                input.setCustomValidity("Debe tener 10 dígitos.");
            } else {
                input.setCustomValidity("");
            }
        }

        function validarTelefono(input) {
            let cleanValue = input.value.replace(/\D/g, '').substring(0, 10);
            input.value = cleanValue;
            if (cleanValue.length !== 10 && cleanValue.length > 0) {
                input.setCustomValidity("Debe tener 10 dígitos.");
            } else {
                input.setCustomValidity("");
            }
        }

        function soloLetras(input) {
            input.value = input.value.replace(/[^a-zA-ZáéíóúÁÉÍÓÚñÑ\s]/g, '');
        }
    </script>

</body>

</html>